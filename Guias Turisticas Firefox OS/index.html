<!DOCTYPE html> 
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
<meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

<title>Guias</title>
<link href="jquery-mobile/jquery.mobile-1.0a3.min.css" rel="stylesheet" type="text/css"/>
<link href="jquery-mobile/guias.min.css" rel="stylesheet" type="text/css"/> 
<script src="jquery-mobile/jquery-1.5.min.js" type="text/javascript"></script>
<script src="jquery-mobile/jquery.mobile-1.0a3.min.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="estilos.css">
<script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.2.min.js"></script> <!--Parse: Persistencia de datos-->



	<script type="text/javascript" charset="utf-8">
    var id;
	var idDatosGenerales;
	var idSeleccion;
	var ciudad;
	var tipo;
	var latitud;
	var longitud;
	var latitudConsulta;
	var longitudConsulta;
	var largo;
	var titulo;
	var descripcion;
	var imagen;
	var urlCompartir;
	var arregloCordenadas;


            Parse.initialize("sAvN1s8H6CQVbyR2ORKuOFJf984v6tlVEYWhoZA0", "mrNsGnjIt49yCRy234v2AlLtECvvwDsNjbNJ9MK0", "gwgoi0wYa1fLXfqJtE5CTR3GBXHOaK5fQDnp4rUL");

    
    
       
        function errorCB(tx, err) {
            alert("Error processing SQL: "+err);
        }
    
        // Transaction success callback
        //

		
		//Metodo que guarda la ciudad que el usuario selecciona en el menu principal de la aplicacion donde se encuentran las ciudades
	       //Metodo que guarda la ciudad que el usuario selecciona en el menu principal de la aplicacion donde se encuentran las ciudades
        function ciudadSeleccionada(ciudadSeleccionada){
            ciudad = ciudadSeleccionada;
            $('#tituloCiudad').html('<p>'+ciudad+' </p>');
            $('#sobreAcerca').html('<p> <a href="#" onclick="showAlert();">Sobre '+ciudad+'</a> | <a href="#" onClick="acercaDe();">  Acerca de </p>');
        }
        
        //Metodo que guarda la categoria que el usuario selecciona en el menu de categorias (restaurantes, hoteles, etc.)
        function tipoSeleccionado(tipoSeleccionada){
            tipo = tipoSeleccionada;
            datosCrearListas(); 
        }
        
        
     
     function datosGeneralesNombre(){
       var DatosGenerales = Parse.Object.extend("tbl_datosGenerales");
       var datosGenerales = new Parse.Query(DatosGenerales);
            datosGenerales.find({
                success: function(results){
                    titulo = results[idDatosGenerales].get("nombre");
                    imagen = results[idDatosGenerales].get("imagen");
                    var direccion = results[idDatosGenerales].get("direccion");
                    descripcion = results[idDatosGenerales].get("descripcion");
                    latitudConsulta = results[idDatosGenerales].get("latitud");
                    longitudConsulta = results[idDatosGenerales].get("longitud");
                    urlCompartir = results[idDatosGenerales].get("urlCompartir");
        if(tipo=='Restaurantes'){
            $('#titulo').html('<p>'+titulo+' </p>');
        $('#imgDetalle').html('<img src="imagenes/restaurante/'+ciudad+'/'+imagen+'"/>');
        $('#direccion').html('<p>'+direccion+' </p>');
        $('#descripcion').html('<p>'+descripcion+' </p>');
        $('#twitter').html('<a href="https://twitter.com/share?text=Me encuentro en '+titulo+' disfrutando de una rica comida" target="_blank"><img src="imagenes/Logo-twitter.png" align="right" width="15%" height="10%"/></a>'); 
        }if (tipo=='Hoteles'){
            $('#tituloh').html('<p>'+titulo+' </p>');
        $('#imgDetalleh').html('<img src="imagenes/restaurante/'+ciudad+'/'+imagen+'"/>');
        $('#direccionh').html('<p>'+direccion+' </p>');
        $('#descripcionh').html('<p>'+descripcion+' </p>');
        $('#twitterh').html('<a href="https://twitter.com/share?text=Me encuentro en '+titulo+' disfrutando de sus instalaciones" target="_blank"><img src="imagenes/Logo-twitter.png" align="right" width="15%" height="10%"/></a>');
        }if (tipo=='Compras'){
            $('#tituloc').html('<p>'+titulo+' </p>');
        $('#imgDetallec').html('<img src="imagenes/restaurante/'+ciudad+'/'+imagen+'"/>');
        $('#direccionc').html('<p>'+direccion+' </p>');
        $('#descripcionc').html('<p>'+descripcion+' </p>');
        $('#twitterc').html('<a href="https://twitter.com/share?text=Me encuentro en '+titulo+' de compras pasandola bien" target="_blank"><img src="imagenes/Logo-twitter.png" align="right" width="15%" height="10%"/></a>');
        }
        if (tipo=='Diversion'){
            $('#tituloo').html('<p>'+titulo+' </p>');
        $('#imgDetalleo').html('<img src="imagenes/restaurante/'+ciudad+'/'+imagen+'"/>');
        $('#direcciono').html('<p>'+direccion+' </p>');
        $('#descripciono').html('<p>'+descripcion+' </p>');
        $('#twittero').html('<a href="https://twitter.com/share?text=Me encuentro en '+titulo+' pasandola bien" target="_blank"><img src="imagenes/Logo-twitter.png" align="right" width="15%" height="10%"/></a>');
        }if (tipo=='PuntoInteres'){
        $('#titulot').html('<p>'+titulo+' </p>');
        $('#imgDetallet').html('<img src="imagenes/restaurante/'+ciudad+'/'+imagen+'"/>');
        $('#direcciont').html('<p>'+direccion+' </p>');
        $('#descripciont').html('<p>'+descripcion+' </p>');
        $('#twittert').html('<a href="https://twitter.com/share?text=Me encuentro en '+titulo+' disfrutando de un bonito lugar" target="_blank"><img src="imagenes/Logo-twitter.png" align="right" width="15%" height="10%"/></a>');
        $('#galeria').html('<p><a href="#imagenes" onClick="galeria(1);"><img src="imagenes/galeria/'+titulo+'/001s.jpg"/ width="15%" height="15%"></a>  <a href="#imagenes" onClick="galeria(2);"><img src="imagenes/galeria/'+titulo+'/002s.jpg"/ width="15%" height="15%"></a>  <a href="#imagenes" onClick="galeria(3);"><img src="imagenes/galeria/'+titulo+'/003s.jpg"/ width="15%" height="15%"></a></p>');
        }
                
                 },
                error: function(error) {
                    alert("Error: " + error.code + " " + error.message);
                }
                });
        
     }  
           function galeria(x){ 
          if(x==1){
            $('#imgagenGaleria').html('<img src="imagenes/galeria/'+titulo+'/001.jpg"/>');  
          }else if(x==2){
            $('#imgagenGaleria').html('<img src="imagenes/galeria/'+titulo+'/002.jpg"/>');    
          }else{
            $('#imgagenGaleria').html('<img src="imagenes/galeria/'+titulo+'/003.jpg"/>');    
          }
          }

         
    
     function datosCrearListas(){
        var DatosCrearLista = Parse.Object.extend("tbl_datosGenerales");
        var datosCrearLista = new Parse.Query(DatosCrearLista);
            datosCrearLista.find({
                success: function(results) {
                var totalRegistros = results.length;
                    if(tipo== 'PuntoInteres'){
                        $('#tituloOpciones').html('<p >Puntos de interes</p>');
                    }else{
                        $('#tituloOpciones').html('<p>'+tipo+' </p>');
                    }
                $('#lista').html('<ul data-role="listview" data-theme="a" data-filter="true" id="opcionesConsultadas">');
        
                for(i=0;i<=totalRegistros-1;i++){
                    var ciudadConsulta = results[i].get("ciudad");
                    var tipoConsulta = results[i].get("tipo");
                        if(ciudadConsulta == ciudad && tipoConsulta == tipo){           
                            var nombreConsulta = results[i].get("nombre");
                            var descripcionConsulta = results[i].get("descripcion");
                            $('#opcionesConsultadas').append('<li><a href="#'+tipo+'" onClick="idPlantilla('+i+');"><img src="imagenes/iconos/'+tipo+'.png"/><h3>'+nombreConsulta+'</h3><p>'+descripcionConsulta+'</p> </a></li>');
                 
                        }
                }    
                $('#lista').append('</ul');
                $('#opcionesConsultadas').listview();

                 },
                error: function(error) {
                    alert("Error: " + error.code + " " + error.message);
                }
                });
    }
		 
         function idPlantilla(idConsulta, tipoConsulta) {
             id=idConsulta; 
          if (tipo=='Restaurantes'){
               datosRestaurante();  
             }else if(tipo=='Hoteles'){
                 datosHotel();
                 }else if(tipo=='Compras'){
                     datosCompra();
                     }else if(tipo=='Diversion'){
                         datosOcio();
                         }else if(tipo=='PuntoInteres'){
                             datosTuristicos();
                             }          
         }
         //busqueda general
         function idPlantillaGeneral(idBusqueda,TipoBusqueda){
             id=idBusqueda;
             
             if (TipoBusqueda=='1'){
                 tipo='Restaurantes';
               datosRestaurante();  
             }else if(TipoBusqueda=='2'){
                 tipo='Hoteles';
                 datosHotel();
                 }else if(TipoBusqueda=='3'){
                     tipo='Compras';
                     datosCompra();
                     }else if(TipoBusqueda=='4'){
                         tipo='Diversion';
                         datosOcio();
                         }else if(TipoBusqueda=='5'){
                             tipo='PuntoInteres';
                             datosTuristicos();
                             }      
         }
         //Favoritos agregados por el usuario
         function lala(idFavorito,ciudadFavorito,tipoFavorito){
              id=idFavorito;
              if(ciudadFavorito=='1'){
              ciudad='Guaymas';
              }else if(ciudadFavorito=='2'){
              ciudad='Empalme';
              }else{
              ciudad='San carlos';
              }
              if (tipoFavorito=='1'){
                 tipo='Restaurantes';
               datosRestaurante();  
             }else if(tipoFavorito=='2'){
                 tipo='Hoteles';
                datosHotel();
                 }else if(tipoFavorito=='3'){
                     tipo='Compras';
                     datosCompra();
                     }else if(tipoFavorito=='4'){
                         tipo='Diversion';
                        datosOcio();
                         }else if(tipoFavorito=='5'){
                             tipo='PuntoInteres';
                             datosTuristicos();
                             }  
         }
		 
		 
		 function datosRestaurante(){

            var DatosRestaurantes = Parse.Object.extend("tbl_restaurante");
            var datosRestaurantes = new Parse.Query(DatosRestaurantes);
            datosRestaurantes.find({
                success: function(results) {
                 var numeroRegistros = results.length;
                 for(i =0;i<numeroRegistros;i++){
                var idGeneralConsulta = results[i].get("idDatosGenerales")-1;              
                if(idGeneralConsulta == id){
                idSeleccion = i;
                break;  
                }
            }
                var telefono = results[idSeleccion].get("telefono");
                var cocina = results[idSeleccion].get("cocina");
                var rangoPrecio = results[idSeleccion].get("rangoPrecio");
                var pagina = results[idSeleccion].get("pagina");
        $('#telefono').html('<p>'+telefono+' </p>');
        $('#cocina').html('<p>'+cocina+' </p>');
        $('#rangoPrecio').html('<p>'+rangoPrecio+' </p>');
        if(pagina!=""){
        $('#pagina').html(' <p>'+pagina+'</p>');
        }else{
            $('#pagina').html(' <p></p>');
        }
         idDatosGenerales=results[idSeleccion].get("idDatosGenerales")-1;
        datosGeneralesNombre();


                },
                error: function(error) {
                    alert("Error: " + error.code + " " + error.message);
                }
                });
        }


            

             
        function datosHotel(){
            var DatosHoteles = Parse.Object.extend("tbl_hotel");
            var datosHoteles = new Parse.Query(DatosHoteles);
            datosHoteles.find({
                success: function(results) {
            var numeroRegistros = results.length;
            for(i =0;i<numeroRegistros;i++){
                var idGeneralConsulta = results[i].get("idDatosGenerales")-1;
                if(idGeneralConsulta == id){
                idSeleccion = i;
                break;  
                }
            }
             var telefono = results[idSeleccion].get("telefono");
            var categoria = results[idSeleccion].get("categoria");
            var rangoPrecio = results[idSeleccion].get("rangoPrecio");
            var pagina = results[idSeleccion].get("pagina");
      $('#telefonoh').html('<p>'+telefono+' </p>');
        $('#categoriah').html('<img src="imagenes/estrellas/'+categoria+'"/>');
        $('#rangoPrecioh').html('<p>'+rangoPrecio+' </p>');
        if(pagina!=""){
        $('#paginah').html(' <p>'+pagina+'</p>');
        }else{
            $('#paginah').html(' <p></p>');
        }
        idDatosGenerales=results[idSeleccion].get("idDatosGenerales")-1;
        datosGeneralesNombre();
        
        },
                error: function(error) {
                    alert("Error: " + error.code + " " + error.message);
                }
                });
        }
		 
		function datosCompra(){   
            var DatosCompras = Parse.Object.extend("tbl_compras");
            var datosCompras = new Parse.Query(DatosCompras);
            datosCompras.find({
                success: function(results) {
            var numeroRegistros = result.length;
            for(i =0;i<numeroRegistros;i++){
                var idGeneralConsulta = results[i].get("idDatosGenerales")-1;
                if(idGeneralConsulta == id){
                idSeleccion = i;
                break;  
                }
            }
            var telefono = results[idSeleccion].get("telefono");
            var pagina = results[idSeleccion].get("pagina");
        $('#telefonoc').html('<p>'+telefono+' </p>');
        if(pagina!=""){
        $('#paginac').html(' <p>'+pagina+'</p>');
        }else{
            $('#paginac').html(' <p></p>');
        }
         idDatosGenerales = results[idSeleccion].get("idDatosGenerales")-1;
        datosGeneralesNombre();
        },
                error: function(error) {
                    alert("Error: " + error.code + " " + error.message);
                }
                });
        }
        
                             
        function datosOcio(){
            var DatosOcio = Parse.Object.extend("tbl_ocio");
            var datosOcio = new Parse.Query(DatosOcio);
            datosOcio.find({
                success: function(results) {
            var numeroRegistros = results.length;
            for(i =0;i<numeroRegistros;i++){
                var idGeneralConsulta = results[i].get("idDatosGenerales")-1;
                if(idGeneralConsulta == id){
                idSeleccion = i;
                break;  
                }
            }
              var telefono = results[idSeleccion].get("telefono");
          
      $('#telefonoo').html('<p>'+telefono+' </p>');
                
        idDatosGenerales=results[idSeleccion].get("idDatosGenerales")-1;
        datosGeneralesNombre();
        },
                error: function(error) {
                    alert("Error: " + error.code + " " + error.message);
                }
                });
        }
        

        function datosTuristicos(){
            var DatosPuntoInteres = Parse.Object.extend("tbl_PuntoInteres");
            var datosPuntoInteres = new Parse.Query(DatosPuntoInteres);
            datosPuntoInteres.find({
                success: function(results) {
            var numeroRegistros = results.length;
            for(i =0;i<numeroRegistros;i++){
                var idGeneralConsulta = results[i].get("idDatosGenerales")-1;
                if(idGeneralConsulta == id){
                idSeleccion = i;
                break;  
                }
            }
             var telefono = results[idSeleccion].get("telefono");          
            var pagina = results[idSeleccion].get("pagina");
        if(pagina!=""){
        $('#paginat').html(' <p>'+pagina+'</p>');
        }else{
            $('#paginat').html(' <p></p>');
        }
        idDatosGenerales=results[idSeleccion].get("idDatosGenerales")-1;
        datosGeneralesNombre();
        },
                error: function(error) {
                    alert("Error: " + error.code + " " + error.message);
                }
                });
        }

        
     
        //Metodo en el cual se agrega un elemento a la tabla de favoritos
     function largoFavoritos(){
        var DatosFavoritos = Parse.Object.extend("tbl_favoritos");
            var datosFavoritos = new Parse.Query(DatosFavoritos);
            datosFavoritos.find({
                success: function(results) {
         var numeroRegistros = results.length;
         var numeroRegistrosFav = (results.rows.length);
         if(numeroRegistrosFav==0){
         largo = results.length+1;
         abrirFavoritos();
         }else{
        var yaAgregado = false;
        for(i=0;i<numeroRegistrosFav;i++){
            if(titulo == results[i].get("nombre")){
                yaAgregado=true;
                break;
         }
        }
         if(yaAgregado==true){
         alertyaAgregado(); 
         }else{
         largo = results.length+1;
         abrirFavoritos();
         }
        
         }
     },
                error: function(error) {
                    alert("Error: " + error.code + " " + error.message);
                }
                });
        }

	 
function enviarPosicion(){
     var TestObject = Parse.Object.extend("tbl_favoritos");
    var testObject = new TestObject();
      testObject.save({largo:largo, titulo:titulo, descripcion:descripcion, tipo:tipo, imagen:imagen, ciudad:ciudad, idDatosGenerales:idDatosGenerales}, {
      success: function(object) {
        $(".success").show();
        chistes();
      },
      error: function(model, error) {
        $(".error").show();
      }
    });
}
	 
	  function crearListFav(){
         var DatosFavoritos = Parse.Object.extend("tbl_favoritos");
         var datosFavoritos = new Parse.Query(DatosFavoritos);
            datosFavoritos.find({
                success: function(results) {
              var totalFav = results.length;
         $('#listaFavoritos').html('<ul data-role="listview" data-theme="a" data-filter="true" id="favoritosConsultados">');    
         for(i=0;i<totalFav;i++){
            var idFav = results[i].get("idFavoritos");
            var tipoFav = results[i].get("tipo");    
            var nombreFav = results[i].get("nombre");
            var ciudadFav = results[i].get("ciudad");
            var descripcionFav = results[i].get("descripcion");
            var imagenFav = results[i].get("imagen");
            var idDatosGrlFav = results[i].get("idDatosGenerales");
            var ciudadParam;
            if(ciudadFav=='Guaymas'){
                ciudadParam='1';
            }else if(ciudadFav=='Empalme'){
                ciudadParam='2';
            }else{
            ciudadParam='3';
            }
            if(tipoFav=='Restaurantes'){
        $('#favoritosConsultados').append('<li><a href="#Restaurantes" onClick="lala('+idDatosGrlFav+','+ciudadParam+',1);"><img src="imagenes/restaurante/'+ciudadFav+'/'+imagenFav+'"/><h3>'+nombreFav+'</h3><p>'+descripcionFav+'</p> </a></li>');
            }
          if(tipoFav=='Hoteles'){
        $('#favoritosConsultados').append('<li><a href="#Hoteles" onClick="lala('+idDatosGrlFav+','+ciudadParam+',2);"><img src="imagenes/restaurante/'+ciudadFav+'/'+imagenFav+'"/><h3>'+nombreFav+'</h3><p>'+descripcionFav+'</p> </a></li>');
            }
          if(tipoFav=='Compras'){
        $('#favoritosConsultados').append('<li><a href="#Compras" onClick="lala('+idDatosGrlFav+','+ciudadParam+',3);"><img src="imagenes/restaurante/'+ciudadFav+'/'+imagenFav+'"/><h3>'+nombreFav+'</h3><p>'+descripcionFav+'</p> </a></li>');
            }
          if(tipoFav=='Diversion'){
        $('#favoritosConsultados').append('<li><a href="#Diversion" onClick="lala('+idDatosGrlFav+','+ciudadParam+',4);"><img src="imagenes/restaurante/'+ciudadFav+'/'+imagenFav+'"/><h3>'+nombreFav+'</h3><p>'+descripcionFav+'</p> </a></li>');
            }
            if(tipoFav=='PuntoInteres'){
        $('#favoritosConsultados').append('<li><a href="#PuntoInteres" onClick="lala('+idDatosGrlFav+','+ciudadParam+',5);"><img src="imagenes/restaurante/'+ciudadFav+'/'+imagenFav+'"/><h3>'+nombreFav+'</h3><p>'+descripcionFav+'</p> </a></li>');
            }
             
         }    
         $('#listaFavoritos').append('</ul');
         $('#favoritosConsultados').listview();
     },
      error: function(model, error) {
        $(".error").show();
      }
    });
}
     
            
             
        function datosTuristicosGral(){
            var DatosTuristicosGrl = Parse.Object.extend("tbl_favoritos");
            var datosTuristicosGrl = new Parse.Query(DatosTuristicosGrl);
            datosTuristicosGrl.find({
                success: function(results) {
            var numeroRegistros = results.length;
                     $('#listaFavoritosGral').html('<ul data-role="listview" data-theme="a" data-filter="true" id="favoritosConsultadosGral">');    
         for(i=0;i<numeroRegistros;i++){
             var ciudadFavGrl = results[i].get("ciudad");
            var idFavGrl = results[i].get("idFavoritos");
            var tipoFavGrl = results[i].get("tipo");         
            var nombreFavGrl = results[i].get("nombre");
            var descripcionFavGrl = results[i].get("descripcion");
            var imagenFavGrl = results[i].get("imagen");
            if(ciudadFavGrl == ciudad){
            if(tipoFavGrl=='Restaurantes'){
                $('#favoritosConsultadosGral').append('<li><a href="#Restaurantes" onClick="idPlantillaGeneral('+i+',1);"><img src="imagenes/restaurante/imagenesFav/'+imagenFavGrl+'"/><h3>'+nombreFavGrl+'</h3><p>'+descripcionFavGrl+'</p> </a></li>');
            }
            if(tipoFavGrl=='Hoteles'){
                $('#favoritosConsultadosGral').append('<li><a href="#Hoteles" onClick="idPlantillaGeneral('+i+',2);"><img src="imagenes/restaurante/imagenesFav/'+imagenFavGrl+'"/><h3>'+nombreFavGrl+'</h3><p>'+descripcionFavGrl+'</p> </a></li>');
            }
            if(tipoFavGrl=='Compras'){
                $('#favoritosConsultadosGral').append('<li><a href="#Compras" onClick="idPlantillaGeneral('+i+',3);"><img src="imagenes/restaurante/imagenesFav/'+imagenFavGrl+'"/><h3>'+nombreFavGrl+'</h3><p>'+descripcionFavGrl+'</p> </a></li>');
            }
            if(tipoFavGrl=='Diversion'){
                $('#favoritosConsultadosGral').append('<li><a href="#Diversion" onClick="idPlantillaGeneral('+i+',4);"><img src="imagenes/restaurante/imagenesFav/'+imagenFavGrl+'"/><h3>'+nombreFavGrl+'</h3><p>'+descripcionFavGrl+'</p> </a></li>');
            }
            if(tipoFavGrl=='PuntoInteres'){
                $('#favoritosConsultadosGral').append('<li><a href="#PuntoInteres" onClick="idPlantillaGeneral('+i+',5);"><img src="imagenes/restaurante/imagenesFav/'+imagenFavGrl+'"/><h3>'+nombreFavGrl+'</h3><p>'+descripcionFavGrl+'</p> </a></li>');
            }
            
            }
         }    
         $('#listaFavoritosGral').append('</ul');
         $('#favoritosConsultadosGral').listview();
        },
      error: function(model, error) {
        $(".error").show();
      }
    });
}
        
    
             
        function datosArregloMapa(){
            var DatosArregloMapa = Parse.Object.extend("tbl_datosGenerales");
            var datosArregloMapa = new Parse.Query(DatosArregloMapa);
            datosArregloMapa.find({
                success: function(results) {
            var posiciones = results.length;
            var contador=0;
            for(i=0;i<posiciones;i++){
            var ciudadMapa = results[i].get("ciudad");
            if(ciudad==ciudadMapa){
            contador++; 
            }
            }
            arregloCordenadas=new Array(contador);
            for(i=0;i<contador;i++){
                arregloCordenadas[i]= new Array(4);
            }
            var x=0;
            for(i=0;i<posiciones-1;i++){
            var latitud = results[i].get("latitud");
            var longitud = results[i].get("longitud");
            var tituloMapa = results[i].get("nombre");
            var descripcionMapa = results[i].get("descripcion");
            var ciudadMapa2 = results[i].get("ciudad");
            if(ciudad==ciudadMapa2){        
            arregloCordenadas[x][0]=latitud;
            arregloCordenadas[x][1]=longitud;
            arregloCordenadas[x][2]=tituloMapa;
            arregloCordenadas[x][3]=descripcionMapa;
            x++;
            }
            }
            mapaMarker();
            
        },
      error: function(model, error) {
        $(".error").show();
      }
    });
}
		
		function showAlert() {
		if(ciudad=="Guaymas"){
        navigator.notification.alert(
            'Sobre  Guaymas:\nHeroica Guaymas conocida como "La Perla del Mar de Cortés" es una ciudad y puerto del estado mexicano de Sonora.\nEs una de las principales ciudades productoras de camarón en el norte de México y anteriormente también fue destacada por su captura de ostras.\n\nDesde sus inicios, Guaymas se destacó por tener un economía fundamentada principalmente en la pesca y otras actividades relacionadas con el mar. Sin embargo, con la paulatina escasez de recursos pesqueros que se ha venido dando en la región en las últimas décadas y con el incremento de la contaminación marina, el sustento de su economía ha tenido que buscar otras vertientes, hasta el punto de que actualmente gran parte de la actividad laboral guaymense de basa en la industria maquiladora y en el turismo.');}
			else if(ciudad=="Empalme"){
				        navigator.notification.alert(
            'Sobre  Empalme:\n Empalme es uno de los 72 municipios del estado mexicano de Sonora. Se ubica al sur del estado y su cabecera es la población de Empalme. Colinda al norte, este y oeste con Guaymas, y al sur con el Golfo de Baja California y tiene una altura de 7 metros sobre el nivel del mar. Se le conoce como "La Ciudad Jardín"; por su gran cantidad de árboles que existen en la localidad.\n\n En Empalme Podrás Disfrutar de:\n La playas de arena blanca y pendientes suaves son el escenario del espectáculo único que se repite los primeros meses de cada año, esta ciudad nos regala la magia de su entorno y hermosas maravillas de la naturaleza, como el parque de cactus gigantes, muchos de ellos de edad milenaria que superan los tres metros de altura, cuenta con un museo que exhibe las artesanías más representativas del su gente y de sus ancestros; está localizado en el jardín del Sindicato Ferrocarrilero.');
			}
    }
	
		    function acercaDe() {
        navigator.notification.alert(
      'Desarrollado por:\nEdgar Orlando Mendivil Laurean\nmendivil.aguila@gmail.com\nAgosto del 2013');
    }
	        function alertyaAgregado(){
				navigator.notification.alert(
            'El elemento que deseas agregar ya ha sido agregado anteriormente');
			}
		
		
		function comoLlegar(){			
        if(navigator.geolocation){
        mostrarMensaje("obteniendo posición...");
        navigator.geolocation.getCurrentPosition(onSuccessGeolocating,errorPosicionar);
    }else{
        mostrarMensaje('Tu navegador no soporta geolocalización');
    }  
        }
		
		function onSuccessGeolocating(position){
            latitud = position.coords.latitude;
            longitud = position.coords.longitude;
            initialize();
       
    }

    function errorPosicionar(error) {
    switch(error.code)  
    {  
        case error.TIMEOUT:  
            mostrarMensaje('Request timeout');  
        break;  
        case error.POSITION_UNAVAILABLE:  
            mostrarMensaje('Tu posición no está disponible');  
        break;  
        case error.PERMISSION_DENIED:  
            mostrarMensaje('Tu navegador ha bloqueado la solicitud de geolocalización');  
        break;  
        case error.UNKNOWN_ERROR:  
            mostrarMensaje('Error desconocido');  
        break;  
    }  
}
 
function mostrarMensaje(str){
    $('#texto').html(str);
    $('#capa_mensajes').css({"visibility":"visible"});
}
		 
        </script>
<link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCGf52hOoub7DZhbFHS6ynD1M8f8MIjJxA&sensor=true">
    </script>
	 <script type="text/javascript">
    var directionDisplay;
    var directionsService = new google.maps.DirectionsService();
    
	var latM;
	var lngM;

     function initialize(latitud, longitud,latitudConsulta, longitudConsulta) {
        directionsDisplay = new google.maps.DirectionsRenderer();
        var chicago = new google.maps.LatLng(27.9139609,-110.9020720);
        var myOptions = {
            zoom: 6,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            center: chicago
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        directionsDisplay.setMap(map);
        calcRoute();
    }
	
	function mapaMarker(){
	if(ciudad=='Guaymas'){
		latM=27.9139609;
		lngM=-110.9020720;
	}else if(ciudad=='Empalme'){
		latM=27.9640614;
		lngM=-110.8086114;
	}else{
		latM=27.96748322879787;
		lngM=-111.02697372436523;	
	}
	var mapOptions = {
		center: new	google.maps.LatLng(latM,lngM),
		zoom: 13,
		mapTypeId: google.maps.MapTypeId.ROADMAP
	};
	var mapMarker = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
		
				for(i=0;i<arregloCordenadas.length;i++){
			var lat=arregloCordenadas[i][0];
			var lng=arregloCordenadas[i][1];
			var marker = new google.maps.Marker({
				position: new google.maps.LatLng(lat,lng),
				/*animation: google.maps.Animation.DROP,*/
				map: mapMarker,
				title: arregloCordenadas[i][2]
			});
						var informacion=new google.maps.InfoWindow({
				content: arregloCordenadas[i][3]
			});

		}
/*		function toggleBounce() {

        if (marker.getAnimation() != null) {
          marker.setAnimation(null);
        } else {
          marker.setAnimation(google.maps.Animation.BOUNCE);
        }
      }*/
	}

    function calcRoute() {

        var waypts = [];

        start  = new google.maps.LatLng(latitud,longitud);		
        end = new google.maps.LatLng(latitudConsulta,longitudConsulta);
        var request = {
            origin: start,
            destination: end,
            waypoints: waypts,
            optimizeWaypoints: true,
            travelMode: google.maps.DirectionsTravelMode.WALKING
        };
		console.log(latitud);
        directionsService.route(request, function(response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                directionsDisplay.setDirections(response);
                var route = response.routes[0];

            }
        });
    }
        </script>
<script src='http://connect.facebook.net/en_US/all.js'></script>
<script> 
      FB.init({appId: "384433688305842", status: true, cookie: true});

         function postToFeed() {

        // calling the API ...
        var obj = {
          method: 'feed',
          redirect_uri: 'https://quiet-gorge-2989.herokuapp.com/',
          link: 'https://quiet-gorge-2989.herokuapp.com/',
          picture: urlCompartir,
          name: 'Guias Turisticas Virtuales Multiplataforma',
          caption: titulo,
          description: descripcion
        };

        function callback(response) {
          document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
        }

        FB.ui(obj, callback);
      }
    
    </script>
  
 
</head> 

<body > 

<div data-role="page"    id="Inicio"> 
     <h1>Guías Virtuales</h1><hr> 
     <div id="botonesCiudad"> 
       <a href="#menu"  class="ico_guaymas" onClick="ciudadSeleccionada('Guaymas');">Guaymas</a>  
       <a href="#menu"class="ico_empalme" onClick="ciudadSeleccionada('Empalme');">Empalme</a> 
       <a href="#menu" class="ico_sancarlos" onClick="ciudadSeleccionada('San carlos');">San Carlos</a>  <br/> <br/>
       <img src="imagenes/logo.png" alt="logo" style="width:100%; max-height:300px; max-width:750px;  display:block; margin:0 auto;"> 
     </div> <!--botones ciudad-->
</div>


<div data-role="page" id="menu">
           <div data-role="header" data-backbtn="true"><h2 style="position:relative;top:15px; font-size:20px; left:-40px; z-index:10;" id="tituloCiudad"></h2> </div>
           <img src="imagenes/logo.png" alt="logo"height="70" style=" position:absolute; display:block; top:20px; right:0;" /><br /><br />
           <div id="botones">     
	  <a href="#mapaGuaymas" onClick="datosArregloMapa();" class="color_cafe"><img  src="imagenes/iconos/un_pixel.png"class="iconos_secciones icono_mapa"/ > Mapa de la ciudad</a> 
	  <a href="#opciones" class="color_rojo" onClick="tipoSeleccionado('Restaurantes');"><img  src="imagenes/iconos/un_pixel.png" class="iconos_secciones icono_restaurantes"/>Restaurantes</a>
      <a href="#opciones"class="color_morado" onClick="tipoSeleccionado('Hoteles');"><img  src="imagenes/iconos/un_pixel.png" class="iconos_secciones icono_hoteles"/>Hoteles</a>
	  <a href="#opciones"class="color_verde" onClick="tipoSeleccionado('Compras');"><img  src="imagenes/iconos/un_pixel.png" class="iconos_secciones icono_compras"/>Compras</a>
	  <a href="#opciones"class="color_azul" onClick="tipoSeleccionado('Diversion');"><img  src="imagenes/iconos/un_pixel.png" class="iconos_secciones icono_diversion"/>Diversion</a>
	  <a href="#opciones"class="color_amarillo" onClick="tipoSeleccionado('PuntoInteres');"><img  src="imagenes/iconos/un_pixel.png" class="iconos_secciones icono_puntos"/>Puntos de interes</a>
	    
    </div><div align="center" id="sobreAcerca"></div> 
    
    
<div data-role="footer" data-id="foo">
	<div data-role="navbar">
		<ul>
			<li><a href="#Inicio" data-icon="home">Inicio</a></li>
			<li><a href="#favoritosGral" onClick="abrirDBListFavGral();" data-icon="search">Buscar</a></li>
			<li><a href="#favoritos" onClick="abrirDBListFav();" data-icon="star">Favoritos</a></li>
		</ul>
	</div><!-- /navbar -->
</div>

</div>
</div>
  
  <div data-role="page" id="opciones">
  <div data-role="header" data-backbtn="true">
  <p align="center" id=tituloOpciones></p>
  </div>
  <section id="lista">
  </section>  
  </div>
  
  <div data-role="page" id="Restaurantes">
<div data-role="header"> <h1 id="titulo"></h1></div>

<div id="imgDetalle"></div>       <div class="dirTel">
									<p> Dirección: </p>
                                  <div id="direccion"> </div>
                                  <p id="telefono"></p> <br><br>
                                  <a  href="#mapaGuaymas" id="llegaraqui" onClick="comoLlegar();" >Ruta hasta Aquí</a>     </div>

<div style="clear:both;"></div>
 <div class="descripcion">
  <p > Cocina: </p>
 <p id="cocina"> </p>
   <p> Rango de Precios: </p>
 <p id="rangoPrecio"> </p>
 <p> Descripcion: </p>
 <p id="descripcion"></p>
 <p id="pagina"> </p> 
  <a onClick="postToFeed(); return false;"><img src="imagenes/icono-facebook.png" align="right" width="15%" height="10%"/></a>
  <div id="twitter"></div>
 </div>
<div data-role="footer" data-id="foo1">
	<div data-role="navbar">
		<ul>
			<li><a href="#Inicio" data-icon="home">Inicio</a></li>
			<li><a href="#favoritos" onClick="abrirDBLargo(); abrirDBListFav();" data-icon="star">Favoritos</a></li>
		</ul>
	</div><!-- /navbar -->
</div>
  </div>
  
   <div data-role="page" id="Hoteles">
<div data-role="header"> <h1 id="tituloh"></h1></div>

<div id="imgDetalleh"></div>       <div class="dirTel">
									<p> Dirección: </p>
                                  <div id="direccionh"> </div>
                                 <p id="telefonoh"></p> <br><br>
                                  <a  href="#mapaGuaymas" id="llegaraquih" onClick="comoLlegar();" >Ruta hasta Aquí</a>     </div>

<div style="clear:both;"></div>
 <div class="descripcion">
  <p > Categoria: </p>
 <div id="categoriah"> </div>
   <p> Rango de Precios: </p>
 <p id="rangoPrecioh"> </p>
 <p> Descripcion: </p>
 <p id="descripcionh"></p>
 <p id="paginah"> </p>
  <a onClick="postToFeed(); return false;"><img src="imagenes/icono-facebook.png" align="right" width="15%" height="10%"/></a>
<div id="twitterh"></div>
 </div>
<div data-role="footer" data-id="foo1">
	<div data-role="navbar">
		<ul>
			<li><a href="#Inicio" data-icon="home">Inicio</a></li>
			<li><a href="#favoritos" onClick="abrirDBLargo(); abrirDBListFav();" data-icon="star">Favoritos</a></li>
		</ul>
	</div><!-- /navbar -->
</div>
  </div>
  
  <div data-role="page" id="Compras">
<div data-role="header"> <h1 id="tituloc"></h1></div>

<div id="imgDetallec"></div>       <div class="dirTel">
									<p> Dirección: </p>
                                  <div id="direccionc"> </div>
                                 <p id="telefonoc"></p> <br><br>
                                  <a  href="#mapaGuaymas" id="llegaraquic" onClick="comoLlegar();" >Ruta hasta Aquí</a>     </div>

<div style="clear:both;"></div>
 <div class="descripcion">
 <p> Descripcion: </p>
 <p id="descripcionc"></p>
 <p id="paginac"> </p>
  <a onClick="postToFeed(); return false;"><img src="imagenes/icono-facebook.png" align="right" width="15%" height="10%"/></a>
<div id="twitterc"></div>
 </div>
<div data-role="footer" data-id="foo1">
	<div data-role="navbar">
		<ul>
			<li><a href="#Inicio" data-icon="home">Inicio</a></li>
			<li><a href="#favoritos" onClick="abrirDBLargo(); abrirDBListFav();" data-icon="star">Favoritos</a></li>
		</ul>
	</div><!-- /navbar -->
</div>
  </div>
  
  <div data-role="page" id="Diversion">
<div data-role="header"> <h1 id="tituloo"></h1></div>

<div id="imgDetalleo"></div>       <div class="dirTel">
									<p> Dirección: </p>
                                  <div id="direcciono"> </div>
                                 <p id="telefonoo"></p> <br><br>
                                  <a  href="#mapaGuaymas" id="llegaraquio" onClick="comoLlegar();" >Ruta hasta Aquí</a>     </div>

<div style="clear:both;"></div>
 <div class="descripcion">
     <p> Descripcion: </p>
 <p id="descripciono"></p>
  <a onClick="postToFeed(); return false;"><img src="imagenes/icono-facebook.png" align="right" width="15%" height="10%"/></a>
  <div id="twittero"></div>
 </div>
<div data-role="footer" data-id="foo1">
	<div data-role="navbar">
		<ul>
			<li><a href="#Inicio" data-icon="home">Inicio</a></li>
			<li><a href="#favoritos" onClick="abrirDBLargo(); abrirDBListFav();" data-icon="star">Favoritos</a></li>
		</ul>
	</div><!-- /navbar -->
</div>
  </div>
  
   <div data-role="page" id="PuntoInteres">
<div data-role="header"> <h1 id="titulot"></h1></div>

<div id="imgDetallet"></div>       <div class="dirTel">
									<p> Dirección: </p>
                                  <div id="direcciont"> </div>
                                  <a  href="#mapaGuaymas" id="llegaraquit" onClick="comoLlegar();" >Ruta hasta Aquí</a>     </div>

<div style="clear:both;"></div>
<div id="galeria"></div>
 <div class="descripcion">
 <p> Descripcion: </p>
 <p id="descripciont"></p>
 <p id="paginat"> </p>
  <a onClick="postToFeed(); return false;"><img src="imagenes/icono-facebook.png" align="right" width="15%" height="10%"/></a>
<div id="twittert"></div>
 </div>
 <div data-role="footer" data-id="foo1">
	<div data-role="navbar">
		<ul>
			<li><a href="#Inicio" data-icon="home">Inicio</a></li>
			<li><a href="#favoritos" onClick="abrirDBLargo(); abrirDBListFav();" data-icon="star">Favoritos</a></li>
		</ul>
	</div><!-- /navbar -->
</div>
  </div>
  
   <div data-role="page" id="imagenes">
<div data-role="header"> <h1>Galeria</h1></div>

<div id="imgagenGaleria"></div>


  </div>
  
  
 <div  data-role="page" id="mapaGuaymas">
 <div data-role="header"><h1> Mapa de la ciudad</h1></div>
 <div id="map_canvas" style="width: 100%; height: 100%"></div>
 </div>  

 <div data-role="page" id="favoritos">
<div data-role="header"> <h1>Favoritos</h1></div>
<section id="listaFavoritos">
  </section>  
</div>
  
 <div data-role="page" id="favoritosGral">
<div data-role="header"><h1>Busqueda</h1></div>
<section id="listaFavoritosGral">
  </section>  
</div>
  
</body>
</html>
